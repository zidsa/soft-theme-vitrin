<div class="search-header header-theme-bg-primary">
    <div class="container ">
        <div class="d-flex align-items-center search-header-bar">
            <div class="d-flex align-items-center bd-highlight header-logo">

                {% if template != 'home' %}
                    <button onclick="goBack()" class="ic-menu-back d-block d-lg-none" type="button", style="all: unset; cursor: pointer;">
                        <span style="font-weight: bold" class="{% if session.lang == 'ar' %}icon-arrow-right{% else %}icon-arrow-left{% endif %} header-theme-icon-primary"></span>
                    </button>
                {% endif %}

                <button onclick="openSlidingMenu()" class="ic menu icon-menu-top d-block d-lg-none" type="button" tabindex="1",   style="all: unset; cursor: pointer;">
                    <span class="icon-menu_open_black_24dp-1 header-theme-icon-primary"></span>
                </button>

                <a href="/" style="width: auto; height: 100%; display: block">
                    {% if settings.header_logo %}
                        {% set logoUrl = settings.header_logo %}
                    {% else %}
                        {% set logoUrl = store.logo %}
                    {% endif %}
                    {% if settings.header_logo_mobile %}
                        {% set logoUrlMobile = settings.header_logo_mobile %}
                    {% elif store.settings.branding.mobile_app_logo %}
                        {% set logoUrlMobile = store.settings.branding.mobile_app_logo %}
                    {% endif %}

                    <img class="image-logo{% if logoUrlMobile is defined and logoUrlMobile is not none %} d-none d-lg-block {% endif %}" src="{{ image_url(logoUrl, h=175, q=100) }}" alt="{{ store.name }}" style="width: auto; max-height: 100%" decoding="async" fetchpriority="high">

                    {% if logoUrlMobile %}
                        <img class="image-logo d-block d-lg-none" src="{{ image_url(logoUrlMobile, h=175, q=100) }}" alt="{{ store.name }}" style="width: auto; max-height: 100%" decoding="async" fetchpriority="high">
                    {% endif %}
                </a>
                
            </div>
            <div class="p-2 d-none d-lg-flex align-items-center bd-highlight search-input lg-search-div flex-grow-1">

                {% if not ('hide_search_bar' in safeget(settings, "header_options", [])) %}
                <div class="form-group" style="position: relative; margin: 0px">
                    <span class="icon-search search-input-icon" style="z-index: 1"></span>
                    <div class="autocomplete" style="position: relative">
                        <input type="text"
                               data-cat-id="{{ category.id if category is defined else '' }}"
                               class="form-control search-input-input"
                               placeholder="{% if settings.header_search_placeholder %}{{ settings.header_search_placeholder }}{% else %}{{_("Search")}}{% endif %}"
                        >
                        <div class="autocomplete-items"></div>
                    </div>
                </div>
                {% endif %}

            </div>
            <div class="bd-highlight d-flex align-items-center justify-content-end header-cart">
                {% if not ('hide_search_bar' in safeget(settings, "header_options", [])) %}
                <div class="d-block d-lg-none sm-search-icon">
                    <span class="icon-search header-theme-icon-primary"></span>
                </div>
                {% endif %}
                <div class="d-none d-lg-block">
                    <a href="/cart" style="color: inherit">
                        <h3 class="cart-header-total"></h3>
                    </a>
                </div>
                <div style="position: relative">
                    <a class="a-shopping-cart" href="{{ url_for('cart_page') }}" style="color: inherit">
                        <span class="icon-shopping_cart_black_36dp-1-1 header-theme-icon-primary"><span class="path1"></span><span class="path2"></span></span>
                        <span class="cart-badge d-none"></span>
                    </a>
                    {% if store.settings.checkout.gift_order_settings.is_gift_order_customer_motivation_enabled == '1' %}
                      <div id="tooltip" class="d-none popover" role="tooltip">
                        <div class="arrow"></div>
                        <div class="gift-popover-body">
                          <img src="{{ 'gift-popover-icon.svg' | asset_url }}" width="24" height="24" />
                          <p class="h6 my-2">
                            {{ _('Send as gift') }}
                          </p>
                          <button class="btn round primary d-block">
                            <a href="/cart" class="no-border d-block">
                              {{ _('continue') }}
                            </a>
                          </button>
                        </div>
                      </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function openSlidingMenu() {
    if (window.slidingMenu && window.slidingMenu.open) {
        window.slidingMenu.open();

    } else if (typeof SlideMenu !== 'undefined') {
        var element = document.getElementById('sliding-menu');
        if (element) {
            window.slidingMenu = new SlideMenu(element, {
                position: (window.appDirection === 'ltr') ? 'left' : 'right',
                showBackLink: true,
                backLinkBefore: (window.appDirection === 'ltr') ? '<span class="icon-arrow_left slide-menu-arrow slide-menu-arrow-back"></span>' : '<span class="icon-arrow_right slide-menu-arrow slide-menu-arrow-back"></span>',
                submenuLinkAfter: (window.appDirection === 'ltr') ? '<span class="icon-arrow_right slide-menu-arrow"></span>' : '<span class="icon-arrow_left slide-menu-arrow"></span>'
            });

            if (typeof $ !== 'undefined') {
                element.addEventListener('sm.open', () => $('body').addClass('sidenav-open'));
                element.addEventListener('sm.close', () => $('body').removeClass('sidenav-open'));
            }

            window.slidingMenu.open();
        }
    }
}
</script>
