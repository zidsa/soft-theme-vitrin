<div class="account-lang-currency upper-bar header-theme-bg-primary header-theme-text-for-primary-bg">
    <div class="container d-flex justify-content-between">
        <div class="account-area">
            <!-- Default Login button (shown initially) -->
            <button type="button" onclick="handleLoginAction()" class="btn btn-dark account-btn" id="login-btn">
                <span class="icon-account_circle_black_24dp header-theme-icon-primary" style="position: relative; top: 1px"></span>
                <span style="position: relative; bottom: 2px">&nbsp;{{ _("Login") }}&nbsp;</span>
            </button>

            <!-- Placeholder for Hello, Customer (hidden initially) -->
            <button type="button" onclick="window.location.href='{{ url_for("profile") }}'" class="btn btn-dark account-btn" id="hello-btn" style="display: none;">
                <span class="icon-account_circle_black_24dp header-theme-icon-primary" style="position: relative; top: 1px"></span>
                <span id="customer-greeting" style="position: relative; bottom: 2px">{{ _("Hello") }} ...</span>
            </button>
        </div>


        {% set multiple_countries = store.countries | length > 1 %}
        {% set multiple_languages = store.languages | length > 1 %}
        {% if (multiple_countries and 'hide_country' not in settings.header_options) or (multiple_languages and 'hide_language' not in settings.header_options) %}
        <div class="language-currency d-flex justify-content-between" data-toggle="modal" data-target="#langCurrecyModal">

            {% if session.lang == 'en' %}
                {% set change_to_lang = 'ar' %}
                {% set change_to_lang_name = 'العربية' %}
            {% else %}
                {% set change_to_lang = 'en' %}
                {% set change_to_lang_name = 'English' %}
            {% endif %}

            {% if multiple_countries and 'hide_country' not in settings.header_options %}
            <div class="currency-button-area d-flex justify-content-center">
                <button class="c-btn currency-btn">{{ session.country.name }} {% if session.country.city %} - {{ session.country.city.name }} {% endif %}</button>
            </div>
            {% endif %}
            {% if (multiple_countries and 'hide_country' not in settings.header_options) and (multiple_languages and 'hide_language' not in settings.header_options) %}
            <div class="vertical-line"></div>
            {% endif %}
            {% if multiple_languages and 'hide_language' not in settings.header_options %}
            <div class="language-button-area d-flex justify-content-between">
                <button type="submit" class='c-btn language-btn d-flex justify-content-between align-items-center'>
                    <span class="px-2">{{ change_to_lang_name }}</span>&nbsp;
                    <span class="icon-language_white"></span>
                </button>
            </div>
            {% endif %}

        </div>
        {% endif %}
    </div>
</div>

<script>
document.addEventListener('zid-customer-fetched', function (event) {
    const customer = event.detail.customer;
    if (customer && customer.name) {
        // Update greeting text
        const greeting = document.getElementById('customer-greeting');
        // Extract the "Hello" text from the existing greeting element (it contains translated text)
        const greetingText = greeting.textContent.trim();
        const helloWord = greetingText.split(' ')[0]; // Get "Hello" or translated equivalent (e.g., "مرحبا")
        greeting.textContent = `${helloWord} ${customer.name}`;

        // Show Hello button, hide Login button
        document.getElementById('hello-btn').style.display = 'inline-block';
        document.getElementById('login-btn').style.display = 'none';
    }
});
</script>